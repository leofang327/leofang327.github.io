<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>æ–¹å­å› | Leo&#39;s Personal Website</title>
    <link>http://leofang.cn/author/%E6%96%B9%E5%AD%9D%E5%90%9B/</link>
      <atom:link href="http://leofang.cn/author/%E6%96%B9%E5%AD%9D%E5%90%9B/index.xml" rel="self" type="application/rss+xml" />
    <description>æ–¹å­å›</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>Â© 2021 leofang</copyright><lastBuildDate>Wed, 24 Mar 2021 08:18:13 +0800</lastBuildDate>
    <image>
      <url>http://leofang.cn/author/%E6%96%B9%E5%AD%9D%E5%90%9B/avatar_hu433b6f6e2665e26af2ceb5633810814f_34630_270x270_fill_q90_lanczos_center.jpg</url>
      <title>æ–¹å­å›</title>
      <link>http://leofang.cn/author/%E6%96%B9%E5%AD%9D%E5%90%9B/</link>
    </image>
    
    <item>
      <title>åˆ©ç”¨ Docker å®Œæˆé¡¹ç›®çš„ CI/CD</title>
      <link>http://leofang.cn/post/docker-ci/</link>
      <pubDate>Wed, 24 Mar 2021 08:18:13 +0800</pubDate>
      <guid>http://leofang.cn/post/docker-ci/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä»¥ &lt;code&gt;Gitlab&lt;/code&gt; å¹³å°å’Œä¸€ä¸ªåŸºäº Java çš„å¾®æœåŠ¡åç«¯é¡¹ç›®ä¸ºä¾‹ï¼Œä»‹ç»äº†å¦‚ä½•åˆ©ç”¨ &lt;code&gt;Docker&lt;/code&gt; å®ç°é¡¹ç›®çš„CI/CDã€‚&lt;/p&gt;
&lt;h1 id=&#34;preliminary&#34;&gt;Preliminary&lt;/h1&gt;
&lt;h2 id=&#34;cicd&#34;&gt;CI/CD&lt;/h2&gt;
&lt;p&gt;CI/CD æ˜¯ä¸€ç§é€šè¿‡åœ¨åº”ç”¨å¼€å‘é˜¶æ®µå¼•å…¥è‡ªåŠ¨åŒ–æ¥é¢‘ç¹å‘å®¢æˆ·äº¤ä»˜åº”ç”¨çš„æ–¹æ³•ã€‚CI/CD çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯&lt;strong&gt;æŒç»­é›†æˆ&lt;/strong&gt;ã€&lt;strong&gt;æŒç»­äº¤ä»˜&lt;/strong&gt;å’Œ&lt;strong&gt;æŒç»­éƒ¨ç½²&lt;/strong&gt;ã€‚ä½œä¸ºä¸€ä¸ªé¢å‘å¼€å‘å’Œè¿è¥å›¢é˜Ÿçš„è§£å†³æ–¹æ¡ˆï¼ŒCI/CD ä¸»è¦é’ˆå¯¹åœ¨é›†æˆæ–°ä»£ç æ—¶æ‰€å¼•å‘çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“è€Œè¨€ï¼ŒCI/CD å¯è®©æŒç»­è‡ªåŠ¨åŒ–å’ŒæŒç»­ç›‘æ§è´¯ç©¿äºåº”ç”¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆä»é›†æˆå’Œæµ‹è¯•é˜¶æ®µï¼Œåˆ°äº¤ä»˜å’Œéƒ¨ç½²ï¼‰ã€‚è¿™äº›å…³è”çš„äº‹åŠ¡é€šå¸¸è¢«ç»Ÿç§°ä¸º&lt;strong&gt;CI/CDç®¡é“&lt;/strong&gt;ï¼Œç”±å¼€å‘å’Œè¿ç»´å›¢é˜Ÿä»¥æ•æ·æ–¹å¼ååŒæ”¯æŒã€‚&lt;/p&gt;
&lt;h2 id=&#34;docker&#34;&gt;Docker&lt;/h2&gt;
&lt;p&gt;Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäº Go è¯­è¨€ å¹¶éµä» Apache2.0 åè®®å¼€æºã€‚&lt;/p&gt;
&lt;p&gt;Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼ˆç±»ä¼¼ iPhone çš„ appï¼‰,æ›´é‡è¦çš„æ˜¯å®¹å™¨æ€§èƒ½å¼€é”€æä½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;docker-compose&#34;&gt;docker-compose&lt;/h2&gt;
&lt;p&gt;å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨ç³»ç»Ÿä¸€èˆ¬åŒ…å«è‹¥å¹²ä¸ªå¾®æœåŠ¡ï¼Œæ¯ä¸ªå¾®æœåŠ¡ä¸€èˆ¬éƒ½ä¼šéƒ¨ç½²å¤šä¸ªå®ä¾‹ï¼Œå¦‚æœæ¯ä¸ªå¾®æœåŠ¡éƒ½è¦æ‰‹åŠ¨å¯åœï¼Œé‚£ä¹ˆæ•ˆç‡ä¹‹ä½ï¼Œç»´æŠ¤é‡ä¹‹å¤§å¯æƒ³è€ŒçŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Docker Compose å¯ä»¥è½»æ¾ã€é«˜æ•ˆçš„ç®¡ç†å®¹å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker çš„åº”ç”¨ç¨‹åºå·¥å…·&lt;/p&gt;
&lt;h2 id=&#34;containerimage&#34;&gt;container/image&lt;/h2&gt;
&lt;p&gt;docker çš„é•œåƒæ¦‚å¿µç±»ä¼¼è™šæ‹Ÿæœºçš„é•œåƒã€‚æ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ï¼Œä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬è¿è¡Œå®¹å™¨æ‰€éœ€çš„æ•°æ®ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºæ–°çš„å®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;docker åˆ©ç”¨å®¹å™¨æ¥è¿è¡Œåº”ç”¨ï¼šdockerå®¹å™¨æ˜¯ç”±dockeré•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./1.jpeg&#34; alt=&#34;å®¹å™¨ä¸é•œåƒ&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;gitlab-ciymldockerfilegitlab-runner&#34;&gt;.gitlab-ci.ymlã€Dockerfileã€gitlab-runner&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;.gitlab-ci.yml&lt;/strong&gt;ï¼šå®šä¹‰ &lt;code&gt;pipeline&lt;/code&gt; é˜¶æ®µåˆ†çº§ä¸æ¯ä¸ªé˜¶æ®µå…·ä½“é€»è¾‘çš„æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dockerfile&lt;/strong&gt;ï¼šç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;gitlab-runner&lt;/strong&gt;ï¼šGitLab-Runnerå°±æ˜¯ä¸€ä¸ªç”¨æ¥æ‰§è¡Œè½¯ä»¶é›†æˆè„šæœ¬çš„ä¸œè¥¿ã€‚ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼šRunnerå°±åƒä¸€ä¸ªä¸ªçš„å·¥äººï¼Œè€ŒGitLab-CIå°±æ˜¯è¿™äº›å·¥äººçš„ä¸€ä¸ªç®¡ç†ä¸­å¿ƒï¼Œæ‰€æœ‰å·¥äººéƒ½è¦åœ¨GitLab-CIé‡Œé¢ç™»è®°æ³¨å†Œï¼Œå¹¶ä¸”è¡¨æ˜è‡ªå·±æ˜¯ä¸ºå“ªä¸ªå·¥ç¨‹æœåŠ¡çš„ã€‚å½“ç›¸åº”çš„å·¥ç¨‹å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒGitLab-CIå°±ä¼šé€šçŸ¥ç›¸åº”çš„å·¥äººæ‰§è¡Œè½¯ä»¶é›†æˆè„šæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./2.png&#34; alt=&#34;gitlab-ci&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;domains&#34;&gt;Domains&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CIæœº&lt;/strong&gt;ï¼šéœ€è¦å®‰è£… &lt;code&gt;docker&lt;/code&gt; å’Œ &lt;code&gt;gitlab-runner&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡æœº&lt;/strong&gt;ï¼šéœ€è¦å®‰è£… &lt;code&gt;git&lt;/code&gt; ã€ &lt;code&gt;docker&lt;/code&gt; å’Œ &lt;code&gt;docker-compose&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gitlab&lt;/strong&gt;ï¼šç”¨äºåœ¨äº‘ç«¯å­˜å‚¨é¡¹ç›®ï¼Œå¹¶ä¸”éœ€è¦åœ¨é¡¹ç›®ä¸­è®¾ç½® &lt;code&gt;ç¯å¢ƒå˜é‡&lt;/code&gt; ä¸ &lt;code&gt;gitlab-runner&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡&lt;/strong&gt;ï¼šéœ€è¦ä½¿ç”¨äº‘å•†æä¾›çš„å®¹å™¨é•œåƒæœåŠ¡æ¥æ„å»º &lt;code&gt;è¿œç¨‹é•œåƒä»“åº“&lt;/code&gt;ï¼Œæœ¬æ–‡ä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;steps&#34;&gt;Steps&lt;/h1&gt;
&lt;h2 id=&#34;1-å‡†å¤‡å·¥ä½œ&#34;&gt;1. å‡†å¤‡å·¥ä½œ&lt;/h2&gt;
&lt;h3 id=&#34;11-ciæœº&#34;&gt;1.1 CIæœº&lt;/h3&gt;
&lt;p&gt;ä½ éœ€è¦è´­ä¹°äº‘å•†æä¾›çš„ECSæœåŠ¡ï¼ŒCIæœºçš„é…ç½®è¦æ±‚å¹¶ä¸é«˜ï¼Œä¸€èˆ¬æ¥è¯´ &lt;code&gt;2æ ¸/4GB/20Mbps&lt;/code&gt; å³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;12-æœåŠ¡æœº&#34;&gt;1.2 æœåŠ¡æœº&lt;/h3&gt;
&lt;p&gt;ä½ éœ€è¦è´­ä¹°äº‘å•†æä¾›çš„ECSæœåŠ¡ï¼Œå»ºè®®æœåŠ¡æœºçš„é…ç½®è®¾é«˜ä¸€ç‚¹ï¼Œæˆ‘è¿™é‡Œæ˜¯ &lt;code&gt;4æ ¸/16GB/20Mbps&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;13-é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡&#34;&gt;1.3 é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡&lt;/h3&gt;
&lt;p&gt;å‡è®¾ä½ å·²ç»æ³¨å†Œè¿‡é˜¿é‡Œäº‘çš„è´¦æˆ·å¹¶ç™»é™†ï¼Œç°åœ¨éœ€è¦å¼€é€šè¯¥è´¦å·ä¸‹çš„å®¹å™¨é•œåƒæœåŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨é˜¿é‡Œäº‘å®˜ç½‘ä¸­ä¾æ¬¡é€‰æ‹© &lt;code&gt;äº§å“&lt;/code&gt; -&amp;gt; &lt;code&gt;å¼¹æ€§è®¡ç®—&lt;/code&gt; -&amp;gt; &lt;code&gt;å®¹å™¨é•œåƒæœåŠ¡ACR&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./3.png&#34; alt=&#34;aliyun1&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‚¹å‡» &lt;code&gt;ç®¡ç†æ§åˆ¶å°&lt;/code&gt;ï¼Œå¹¶é€‰æ‹©é•œåƒä»“åº“çš„ä¸»æœºåœ°å€ï¼Œæœ¬æ–‡é€‰æ‹©&lt;code&gt;åä¸œ2ï¼ˆä¸Šæµ·ï¼‰&lt;/code&gt;ï¼Œè¿›å…¥ä¸ªäººç‰ˆå®ä¾‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./4.png&#34; alt=&#34;aliyun2&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºå‘½åç©ºé—´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./5.png&#34; alt=&#34;aliyun3&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨è¯¥å‘½åç©ºé—´ä¸‹åˆ›å»ºä¸€ä¸ªé•œåƒä»“åº“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€‰æ‹©åœ°åŸŸã€å‘½åç©ºé—´ï¼Œè¾“å…¥ä»“åº“åç§°ã€æ‘˜è¦å’Œæè¿°ä¿¡æ¯ï¼Œä»“åº“ç±»å‹é€‰æ‹©&lt;code&gt;ç§æœ‰&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./6.png&#34; alt=&#34;aliyun4&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç æºé€‰æ‹©&lt;code&gt;æœ¬åœ°ä»“åº“&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;./7.png&#34; alt=&#34;aliyun5&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;2-ciæœºæ“ä½œ&#34;&gt;2. CIæœºæ“ä½œ&lt;/h2&gt;
&lt;h3 id=&#34;21-è¿æ¥ciæœº&#34;&gt;2.1 è¿æ¥CIæœº&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;ssh root@xxx.xxx.xxx.xxx
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;22-å®‰è£…dockerå¹¶ä½¿å…¶èƒ½è‡ªå¯åŠ¨&#34;&gt;2.2 å®‰è£…dockerå¹¶ä½¿å…¶èƒ½è‡ªå¯åŠ¨&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
systemctl enable docker
systemctl start docker
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;23-é…ç½®ssh-keyå¯†é’¥å¯¹ä¸æœåŠ¡æœºé€šä¿¡&#34;&gt;2.3 é…ç½®SSH keyå¯†é’¥å¯¹ä¸æœåŠ¡æœºé€šä¿¡&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;ssh-keygen -t rsa -C &amp;quot;your_email@example.com&amp;quot;
ssh-add ~/.ssh/id_rsa
ssh-copy-id -i ~/.ssh/id_rsa.pub root@æœåŠ¡æœºIP
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;æ³¨ï¼šè¿™é‡Œé…ç½® SSH keyï¼Œæ˜¯å› ä¸º CI/CD çš„ &lt;code&gt;deploy&lt;/code&gt; é˜¶æ®µé€šå¸¸éœ€è¦CIæœºçš„gitlab-runneré€šè¿‡sshè¿æ¥æ¥æ‰§è¡ŒæœåŠ¡æœºçš„å‘½ä»¤ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;24-å®‰è£…gitlab-runnerå¹¶è¿è¡Œ&#34;&gt;2.4 å®‰è£…gitlab-runnerå¹¶è¿è¡Œï¼š&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker run -d --name gitlab-runner --restart always \
-v /srv/gitlab-runner/config:/etc/gitlab-runner \
-v /var/run/docker.sock:/var/run/docker.sock \
-v /root/.ssh:/root/.ssh \
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œåœ¨è¿™ä¸ªå‘½ä»¤é‡Œé¢æŒ‚è½½äº†ä¸‰ä¸ªä¸œè¥¿:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; ç¬¬ä¸€ä¸ªæ˜¯gitlab-runnerçš„é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; ç¬¬äºŒä¸ªæ˜¯ä¸ºäº†è®©runneré‡Œé¢å¯ä»¥æ‰§è¡Œå®¿ä¸»æœºçš„docker&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; ç¬¬ä¸‰ä¸ªæ˜¯ä¸ºäº†è®©CIæœºèƒ½å¤Ÿå…å¯†è®¿é—®æœåŠ¡æœº&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;25-å°†-runner-æ³¨å†Œåˆ°-gitlab-ä¸­&#34;&gt;2.5 å°† runner æ³¨å†Œåˆ° Gitlab ä¸­&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker exec -it gitlab-runner gitlab-ci-multi-runner register
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ä½ ä¼šè¿›å…¥ä¸€ä¸ªå‘½ä»¤è¡Œäº¤äº’ç•Œé¢ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-terminal&#34;&gt;Runtime platform                                    arch=amd64 os=linux pid=19 revision=a998cacd version=13.2.2
Running in system-mode.

Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):
https://code.kfcoding.com/
Please enter the gitlab-ci token for this runner:
bT*********ZcmD
Please enter the gitlab-ci description for this runner:
[b5f641f7df47]: shuishan-data-runner
Please enter the gitlab-ci tags for this runner (comma separated):
shuishan-data-runner
Registering runner... succeeded                     runner=bTYwz7Zf
Please enter the executor: custom, docker, parallels, ssh, docker-ssh, shell, virtualbox, docker+machine, docker-ssh+machine, kubernetes:
docker
Please enter the default Docker image (e.g. ruby:2.6):
ccchieh/centos-common
Runner registered successfully. Feel free to start it, but if it&#39;s running already the config should be automatically reloaded!
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ­¥ï¼šè¾“å…¥ Gitlab URLï¼Œæ¯”å¦‚ &lt;code&gt;https://code.kfcoding.com/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒæ­¥ï¼šè¾“å…¥ gitlab-ci tokenï¼Œè¿™é‡Œå°±éœ€è¦è¿›å…¥è‡ªå·±çš„gitlabä»“åº“ä¸­çš„CI/CDè®¾ç½®é‡Œé¢ï¼Œå¤åˆ¶ä¸‹è‡ªå·±ä»“åº“runnerçš„tokenï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;æ³¨ï¼šè¿™é‡Œæ‰€å¤åˆ¶tokençš„æ‰€åœ¨ group/project å†³å®šäº†è¯¥ runner çš„å¯ç”¨èŒƒå›´&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./8.png&#34; alt=&#34;gitlab-runner&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸‰æ­¥ï¼šè¾“å…¥ runner çš„ descriptionã€tagsï¼Œå…¶ä¸­ tags ä¼šåœ¨åç»­ &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; ä¸­ç”¨åˆ°&lt;/li&gt;
&lt;li&gt;ç¬¬å››æ­¥ï¼šé€‰æ‹© runner çš„æ‰§è¡Œå™¨ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹© docker&lt;/li&gt;
&lt;li&gt;ç¬¬äº”æ­¥ï¼šé€‰æ‹©é»˜è®¤çš„ docker é•œåƒï¼Œè¿™é‡Œæˆ‘ç”¨çš„æ˜¯ä¸ªäººåˆ¶ä½œçš„åŸºäºcentosçš„é•œåƒï¼Œåªæ˜¯åœ¨å®˜æ–¹çš„centosé•œåƒåŸºç¡€ä¸Šå®‰è£…äº†opensshã€gitã€nanoï¼Œå¦‚æœæœ‰å…¶ä»–éœ€è¦çš„è¯ä¹Ÿå¯ä»¥è‡ªå·±åˆ¶ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;26-ç¼–è¾‘-gitlab-runner-çš„é…ç½®æ–‡ä»¶&#34;&gt;2.6 ç¼–è¾‘ gitlab-runner çš„é…ç½®æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;å› ä¸ºæˆ‘ä»¬æŠŠé…ç½®æ–‡ä»¶æŒ‚è½½åˆ°å®¿ä¸»æœºäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç¼–è¾‘å®¿ä¸»æœºçš„æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;vim /srv/gitlab-runner/config/config.toml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œè´´å‡ºæˆ‘çš„é…ç½®åšå‚è€ƒï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-vim&#34;&gt;concurrent = 10
[[runners]]
  name = &amp;quot;s****an&amp;quot;
  url = &amp;quot;https://co*******m/&amp;quot;
  token = &amp;quot;m********JFMHxD&amp;quot;
  executor = &amp;quot;docker&amp;quot;
  [runners.custom_build_dir]
  [runners.cache]
    [runners.cache.s3]
    [runners.cache.gcs]
  [runners.docker]
    tls_verify = false
    image = &amp;quot;ccchieh/centos-common&amp;quot;
    privileged = false
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = false
    volumes = [&amp;quot;/cache&amp;quot;, &amp;quot;/var/run/docker.sock:/var/run/docker.sock&amp;quot;, &amp;quot;/usr/bin/docker:/usr/bin/docker&amp;quot;, &amp;quot;/data/.m2:/root/.m2&amp;quot;, &amp;quot;/root/.ssh:/root/.ssh&amp;quot;, &amp;quot;/root/.docker/:/root/.docker/&amp;quot;]
    pull_policy = &amp;quot;if-not-present&amp;quot;
    shm_size = 0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œä¿®æ”¹çš„ä¸»è¦æ˜¯&lt;code&gt;concurrent&lt;/code&gt;ã€&lt;code&gt;volumes&lt;/code&gt;ã€&lt;code&gt;pull_policy&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;concurrent&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¡¨ç¤ºè¿™ä¸ªrunnerå¯ä»¥å¹¶è¡Œæ‰§è¡Œå¤šå°‘ä»»åŠ¡ï¼Œæ¯”è¾ƒå¸¸è§çš„å°±æ˜¯åŒæ—¶æäº¤å¤šæ¬¡ä»»åŠ¡æ—¶runnerå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæˆ–è€…åœ¨ä¸€æ¬¡ç®¡é“ä½œä¸šä¸­åŒä¸€ä¸ªstageçš„ä»»åŠ¡å¯ä»¥å¹¶è¡Œå®Œæˆï¼Œæ¯”å¦‚åœ¨å›¾ä¸­çš„Buildé˜¶æ®µï¼ŒåŒæ—¶æ‰“åŒ…äº†4ä¸ªå­æ¨¡å—ï¼Œåœ¨å››ä¸ªå­æ¨¡å—ä¸­éƒ½ä¼šå…ˆä¸‹è½½ä¾èµ–ï¼Œè¿™æ—¶å¦‚æœæœ€å¤§å¹¶å‘æ•°è®¾ç½®ä¸ºé»˜è®¤1çš„æ—¶å€™ä¼šæŠŠèŠ±è´¹å¾ˆå¤šæ—¶é—´ï¼Œå¦‚æœå¹¶å‘æ•°å¤§äº4ï¼Œé‚£ä¹ˆBuildé˜¶æ®µå°±å¯ä»¥å¹¶å‘å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./9.png&#34; alt=&#34;pipeline&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;volumes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŒ‚è½½çš„ç›®å½•ï¼Œå°±æ˜¯docker run çš„æ—¶å€™ç”¨çš„ -v æŒ‚è½½çš„ç›®å½•ï¼Œå› ä¸ºæˆ‘ä»¬åé¢éœ€è¦ç¼–è¯‘Dockerfileï¼Œæ‰€ä»¥å°†dockerçš„ç›¸å…³ç›®å½•æ–‡ä»¶æŒ‚è½½ä¸Šå»ï¼Œç„¶åæŒ‚è½½ä¸‹mavenä»“åº“ï¼ˆè¿™é‡Œæ˜¯ç›´æ¥æŒ‚è½½äº†ï¼Œå®é™…ä½¿ç”¨çš„æ—¶å€™ä¹Ÿå¯ä»¥åˆ©ç”¨gitlab-ciæ–‡ä»¶é‡Œé¢çš„cacheè¿›è¡Œç¼“å­˜ï¼‰é¿å…æ¯æ¬¡æ‰“åŒ…ç¼–è¯‘javaé¡¹ç›®çš„æ—¶å€™éƒ½è¦ä¸‹è½½ä¸€æ¬¡ä¾èµ–ï¼ˆè¿™é‡Œæ˜¯é’ˆå¯¹mavençš„ï¼Œå…¶ä»–ä¾èµ–ç®¡ç†è½¯ä»¶è§†æƒ…å†µè€Œå®šï¼‰ã€‚æœ€åæˆ‘è¿™é‡Œç›´æ¥æŠŠå®¿ä¸»æœºçš„.sshä¹ŸæŒ‚è½½ä¸Šå»äº†ï¼Œæ˜¯ä¸ºäº†åé¢å¯ä»¥æ“ä½œè¿œç¨‹éƒ¨ç½²çš„æœåŠ¡å™¨ï¼Œå› ä¸ºæˆ‘è¿™é‡Œéƒ½æ˜¯å†…ç½‘æœºå™¨ï¼Œæ‰€ä»¥å®‰å…¨æ€§æš‚æ—¶ä¸è€ƒè™‘ï¼Œè¿™é‡Œå†å®é™…åº”ç”¨ä¸­è¯·æ³¨æ„ä¸‹ï¼Œé¿å…ä¸å¿…è¦çš„é£é™©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pull_policy&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¡¨ç¤ºåªæœ‰å½“æœ¬åœ°æ²¡é•œåƒçš„æ—¶å€™æ‰æ‹‰å–é•œåƒï¼Œé¿å…æ¯æ¬¡éƒ½é‡æ–°æ‹‰å–é•œåƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-é¡¹ç›®æ–‡ä»¶ç¼–å†™ä¸gitlabè®¾ç½®&#34;&gt;3. é¡¹ç›®æ–‡ä»¶ç¼–å†™ä¸Gitlabè®¾ç½®&lt;/h2&gt;
&lt;h3 id=&#34;31-è®¾ç½®é¡¹ç›®çš„-gitlab-runner&#34;&gt;3.1 è®¾ç½®é¡¹ç›®çš„ gitlab-runner&lt;/h3&gt;
&lt;p&gt;è¿™ä¸€æ­¥å…¶å®åœ¨2.5æ³¨å†Œgitlab-runnerè¾“å…¥tokenæ—¶å·²ç»å®Œæˆäº†ï¼Œç‚¹å‡»é¡¹ç›®çš„ &lt;code&gt;Settings&lt;/code&gt; -&amp;gt; &lt;code&gt;CI/CD&lt;/code&gt; -&amp;gt; &lt;code&gt;Runners&lt;/code&gt;ï¼Œç¡®è®¤ä¹‹å‰æ³¨å†Œçš„runneræ˜¯&lt;code&gt;avaiable&lt;/code&gt;çš„&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./10.png&#34; alt=&#34;runner&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;32-ç¼–å†™-dockerfile&#34;&gt;3.2 ç¼–å†™ Dockerfile&lt;/h3&gt;
&lt;p&gt;å¯¹äºæ¯ä¸ªé¡¹ç›®æˆ‘ä»¬éƒ½éœ€è¦ç¼–å†™ä¸€ä¸ªDockerfileç”¨äºå®ç°å¯¹é¡¹ç›®çš„ç¼–è¯‘æ‰“åŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥Javaå¾®æœåŠ¡åç«¯çš„é¡¹ç›®ä¸ºä¾‹ç®€å•ä»‹ç»ä¸‹ï¼ŒDockerfileæ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-dockerfile&#34;&gt;# æ„å»ºä¸€ä¸ªåŸºæœ¬çš„å¾®æœåŠ¡æ‰“åŒ…ç¯å¢ƒ,å°†å…¬ç”¨æ¨¡å—install
FROM ccchieh/maven3-openjdk-8-cn as prod
ARG MY_HOME=/usr/src/app
COPY . $MY_HOME
WORKDIR $MY_HOME
ENV TIME_ZONE=Asia/Shanghai
RUN ln -snf /usr/share/zoneinfo/$TIME_ZONE /etc/localtime &amp;amp;&amp;amp; echo $TIME_ZONE &amp;gt; /etc/timezone
RUN /usr/local/bin/mvn-entrypoint.sh mvn clean install
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;33-è®¾ç½®é¡¹ç›®çš„ç¯å¢ƒå˜é‡&#34;&gt;3.3 è®¾ç½®é¡¹ç›®çš„ç¯å¢ƒå˜é‡&lt;/h3&gt;
&lt;p&gt;åœ¨.gitlab-ci.ymlä¸­æ˜¯æ”¯æŒå˜é‡çš„ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æŠŠå¦‚ä¸»æœºipç­‰æ•æ„Ÿä¿¡æ¯è®¾ç½®ä¸ºå˜é‡ï¼Œé˜²æ­¢ä¿¡æ¯æ³„éœ²ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./11.png&#34; alt=&#34;variables&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä»¥æˆ‘è¿™é‡Œä¸ºä¾‹åˆ†åˆ«è®¾ç½®äº†å®¹å™¨åç§°ã€é•œåƒç§æœ‰ä»“åº“åœ°å€ã€éƒ¨ç½²æœåŠ¡å™¨åœ°å€ï¼ˆå¦‚root@202.1.1.1ï¼‰ã€æœåŠ¡å™¨ä¸­çš„docker-composeçš„æ–‡ä»¶è·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­é•œåƒç§æœ‰ä»“åº“åœ°å€çš„å‰ç¼€éœ€è¦å‰å¾€&lt;code&gt;æ­¥éª¤1.3&lt;/code&gt;ä¸­æ–°å»ºçš„é•œåƒä»“åº“æ¥è·å–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./12.png&#34; alt=&#34;image-gang&#34;&gt;&lt;/p&gt;
&lt;p&gt;åç¼€æ˜¯å…·ä½“é•œåƒçš„åç§°ä»¥åŠé•œåƒç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬å·å¯ä»¥ä»¥ä¸åŒåˆ†æ”¯çš„é•œåƒæ¥åŒºåˆ†ï¼Œæ¯”å¦‚ &lt;code&gt;master/prod&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;34-ç¼–å†™-gitlab-ciyml&#34;&gt;3.4 ç¼–å†™ .gitlab-ci.yml&lt;/h3&gt;
&lt;p&gt;.gitlab-ci.ymlæ–‡ä»¶å®šä¹‰äº†CI/CD pipelineçš„é˜¶æ®µä¸å…·ä½“é€»è¾‘ï¼Œè¿™é‡Œæˆ‘ä»¬åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼ˆpre-buildã€buildã€deployã€cleanupï¼‰æ¥æ‰“åŒ…æ„å»ºé¡¹ç›®çš„é•œåƒï¼š&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå°±ç”¨åˆ°äº†æ­¥éª¤3.3ä¸­è®¾ç½®çš„ç¯å¢ƒå˜é‡&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;stages:
  - pre-build
  - build
  - deploy
  - cleanup


build-base: # é¢„ç¼–è¯‘é˜¶æ®µ
  stage: pre-build
  only:
    - master
  tags:
    - shuishan-data-runner
  script:
    # å…ˆæŠŠåŸºç¡€ç›®å½•ç¼–è¯‘æˆé•œåƒ
    - |
      docker build -t $IMAGE_BASE_MASTER .
      docker push $IMAGE_BASE_MASTER

build-gateway: # ç¼–è¯‘é˜¶æ®µ
  stage: build
  only:
    - master
  tags:
    - shuishan-data-runner
  script:
    # æ‰“åŒ…gateway-zuul
    - |
      docker build --build-arg MODULE_NAME=$CONT_GATEWAY_NAME --build-arg PROFILE_NAME=dockerdev -t $IMAGE_GATEWAY_MASTER -f ./$CONT_GATEWAY_NAME/Dockerfile ./$CONT_GATEWAY_NAME
      docker push $IMAGE_GATEWAY_MASTER

build-usercenter: # ç¼–è¯‘é˜¶æ®µ
  stage: build
  only:
    - master
  tags:
    - shuishan-data-runner
  script:
    # æ‰“åŒ…user-center
    - |
      docker build --build-arg MODULE_NAME=$CONT_USERCENTER_NAME --build-arg PROFILE_NAME=dockerdev -t $IMAGE_USERCENTER_MASTER -f ./bx-core-server/$CONT_USERCENTER_NAME/Dockerfile ./bx-core-server/$CONT_USERCENTER_NAME
      docker push $IMAGE_USERCENTER_MASTER


deploy: # éƒ¨ç½²é˜¶æ®µ
  stage: deploy
  only:
    - master
  tags:
    - shuishan-data-runner
  script:
    - |
      ssh $TEST_SERVER_ADDR docker-compose -f ${TEST_SERVER_PATH}/docker-compose.yml stop
      ssh $TEST_SERVER_ADDR docker-compose -f ${TEST_SERVER_PATH}/docker-compose.yml rm -sf $CONT_GATEWAY_NAME $CONT_USERCENTER_NAME
      ssh $TEST_SERVER_ADDR docker rmi $IMAGE_GATEWAY_MASTER $IMAGE_USERCENTER_MASTER
      ssh $TEST_SERVER_ADDR docker-compose -f ${TEST_SERVER_PATH}/docker-compose.yml up -d --build


cleanup: # æ¸…ç†ä½œä¸š
  stage: cleanup
  only:
    - master
    - prod
  tags:
    - shuishan-data-runner
  script:
    - echo &amp;quot;å›æ”¶åƒåœ¾&amp;quot;
  #    - docker system prune -f
  #  åˆ é™¤dockerä¸­é—´æ— ç”¨é•œåƒï¼Œä½†æ˜¯åœ¨å¹¶è¡Œçš„æ—¶å€™è¿™ä¹ˆåšä¼šå¯¼è‡´æ­£åœ¨buildçš„é•œåƒå¤±å»ä¸­é—´å±‚ï¼Œä½¿å¾—buildå¤±è´¥ï¼Œæ‰€ä»¥æ¨èå®šæœŸæ‰§è¡Œè€Œä¸æ˜¯åœ¨è¿™é‡Œæ‰§è¡Œ
  when: always
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4-æœåŠ¡æœºæ“ä½œ&#34;&gt;4. æœåŠ¡æœºæ“ä½œ&lt;/h2&gt;
&lt;h3 id=&#34;41-è¿æ¥æœåŠ¡æœº&#34;&gt;4.1 è¿æ¥æœåŠ¡æœº&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;ssh root@xxx.xxx.xxx.xxx
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;42-å®‰è£…-docker-å¹¶ä½¿å…¶èƒ½è‡ªå¯åŠ¨&#34;&gt;4.2 å®‰è£… docker å¹¶ä½¿å…¶èƒ½è‡ªå¯åŠ¨&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
systemctl enable docker
systemctl start docker
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;43-å®‰è£…-docker-compose&#34;&gt;4.3 å®‰è£… docker-compose&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo curl -x socks5://dev.zzj.cool:10808 -L &amp;quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)&amp;quot; -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œå› ä¸ºgithubçš„è¿æ¥é—®é¢˜ï¼Œæˆ‘ç”¨äº†ä¸€ä¸ªè‡ªå»ºçš„socketä»£ç†æœåŠ¡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;em&gt;-x socks5://dev.zzj.cool:10808&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;44-å®‰è£…-git&#34;&gt;4.4 å®‰è£… Git&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yum install -y git
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;45-ç¼–å†™-docker-composeyml&#34;&gt;4.5 ç¼–å†™ docker-compose.yml&lt;/h3&gt;
&lt;p&gt;Docker Composeé»˜è®¤çš„æ¨¡æ¿æ–‡ä»¶æ˜¯&lt;code&gt;docker-compose.yml&lt;/code&gt;ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–åœ¨æœåŠ¡æœºä¸Šç¼–å†™&lt;code&gt;docker-compose.yml&lt;/code&gt;æ–‡ä»¶ï¼Œå°†ç¹ççš„dockerå‘½ä»¤æ•´åˆæˆä¸€ä¸ªæ–‡ä»¶ï¼Œæœ€åé€šè¿‡ä¸€è¡Œå‘½ä»¤æ¥ç»Ÿä¸€æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä»¥æˆ‘ä»¬çš„&lt;code&gt;docker-compose.yml&lt;/code&gt;æ–‡ä»¶ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;version: &amp;quot;3&amp;quot;
services:
  nacos:
    container_name: nacos-standalone
    image: nacos/nacos-server:latest
    environment:
    - PREFER_HOST_MODE=hostname
    - MODE=standalone
    restart: always
    volumes:
    - ./nacos/standalone-logs/:/home/nacos/logs
    - ./nacos/init.d/custom.properties:/home/nacos/init.d/custom.properties
    ports:
    - &amp;quot;8848:8848&amp;quot;
    networks:
      default:
        aliases:
         - nacos
  redis:
    container_name: metasequoia-redis
    restart: always
    image: &amp;quot;redis:alpine&amp;quot;
    networks:
      default:
        aliases:
         - redis
# åç«¯ 
  bx-gateway-zuul:
    container_name: bx-gateway-zuul
    image: registry.cn-shanghai.aliyuncs.com/shuishan-data/shuishan-gateway-server:master
    restart: always
    volumes:
    - ./bx-gateway-zuul-logs/:/logs/
    ports:
    - &amp;quot;8080:8080&amp;quot;
    networks:
      default:
        aliases:
         - api # è®¾ç½®apiæœåŠ¡çš„åˆ«å
    environment:
    - NACOS_ADDR=nacos
    - NACOS_PORT=8848
  user-center:
    container_name: user-center
    image: registry.cn-shanghai.aliyuncs.com/shuishan-data/shuishan-usercenter-server:master
    restart: always
    volumes:
    - ./user-center-logs/:/logs/
    environment:
    - NACOS_ADDR=nacos
    - NACOS_PORT=8848
    networks:
      default:
        aliases:
         - usercenter
  shuishan-datav-server:
    container_name: shuishan-datav-server
    image: registry.cn-shanghai.aliyuncs.com/shuishan-data/shuishan-datav-server:master
    restart: always
    volumes:
    - ./shuishan-datav-server-logs/:/logs/
    - ./data/:/root/data/
    environment:
    - NACOS_ADDR=nacos
    - NACOS_PORT=8848
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬éœ€è¦æ‰“åŒ…æ„å»ºçš„æœåŠ¡é•œåƒåŒ…æ‹¬ï¼šnacosæœåŠ¡å‘ç°é•œåƒã€redisæœåŠ¡é•œåƒã€ç½‘å…³æœåŠ¡é•œåƒã€ç”¨æˆ·é‰´æƒæœåŠ¡é•œåƒã€å­æœåŠ¡é•œåƒ(shuishan-datav-server)ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­imageçš„å‰ç¼€è·å–æ–¹å¼ä¸&lt;code&gt;æ­¥éª¤3.3&lt;/code&gt;ç›¸åŒ&lt;/p&gt;
&lt;h3 id=&#34;46-æ„å»ºé¡¹ç›®çš„å®¹å™¨é•œåƒ&#34;&gt;4.6 æ„å»ºé¡¹ç›®çš„å®¹å™¨é•œåƒ&lt;/h3&gt;
&lt;p&gt;è¿›å…¥åˆ°åŒ…å«&lt;code&gt;docker-compose.yml&lt;/code&gt;çš„ç›®å½•åï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker-compose -f ./docker-compose.yml up -d --build
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¯¥å‘½ä»¤å¯ä»¥è‡ªåŠ¨å®ŒæˆåŒ…æ‹¬æ„å»ºé•œåƒï¼Œ(é‡æ–°)åˆ›å»ºæœåŠ¡ï¼Œå¯åŠ¨æœåŠ¡ï¼Œå¹¶å…³è”æœåŠ¡ç›¸å…³å®¹å™¨çš„ä¸€ç³»åˆ—æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†é¡¹ç›®çš„CI/CDï¼Œå¯ä»¥é€šè¿‡å‘é¡¹ç›®pushä»£ç è§¦å‘pipelineæ¥æµ‹è¯•æ•´ä¸ªæµç¨‹ã€‚&lt;/p&gt;
&lt;h1 id=&#34;appendix&#34;&gt;Appendix:&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹å®¿ä¸»æœºä¸‹æ‰€æœ‰å®¹å™¨ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker ps -a
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;åœæ­¢æ‰€æœ‰å®¹å™¨ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker stop $(docker ps -aq)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;æ¸…é™¤æ‰€æœ‰å®¹å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker rm $(docker ps -aq)
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Writing Technical Content in Academic</title>
      <link>http://leofang.cn/post/writing-technical-content/</link>
      <pubDate>Sun, 07 Jun 2020 16:43:13 +0800</pubDate>
      <guid>http://leofang.cn/post/writing-technical-content/</guid>
      <description>&lt;p&gt;Academic is designed to give technical content creators a seamless experience. You can focus on the content and Academic handles the rest.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Highlight your code snippets, take notes on math classes, and draw diagrams from textual representation.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;On this page, you&amp;rsquo;ll find some examples of the types of technical content that can be rendered with Academic.&lt;/p&gt;
&lt;h2 id=&#34;examples&#34;&gt;Examples&lt;/h2&gt;
&lt;h3 id=&#34;code&#34;&gt;Code&lt;/h3&gt;
&lt;p&gt;Academic supports a Markdown extension for highlighting code syntax. You can enable this feature by toggling the &lt;code&gt;highlight&lt;/code&gt; option in your &lt;code&gt;config/_default/params.toml&lt;/code&gt; file.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```python
import pandas as pd
data = pd.read_csv(&amp;quot;data.csv&amp;quot;)
data.head()
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import pandas as pd
data = pd.read_csv(&amp;quot;data.csv&amp;quot;)
data.head()
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;math&#34;&gt;Math&lt;/h3&gt;
&lt;p&gt;Academic supports a Markdown extension for $\LaTeX$ math. You can enable this feature by toggling the &lt;code&gt;math&lt;/code&gt; option in your &lt;code&gt;config/_default/params.toml&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;To render &lt;em&gt;inline&lt;/em&gt; or &lt;em&gt;block&lt;/em&gt; math, wrap your LaTeX math with &lt;code&gt;$...$&lt;/code&gt; or &lt;code&gt;$$...$$&lt;/code&gt;, respectively.&lt;/p&gt;
&lt;p&gt;Example &lt;strong&gt;math block&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;$$\gamma_{n} = \frac{ 
\left | \left (\mathbf x_{n} - \mathbf x_{n-1} \right )^T 
\left [\nabla F (\mathbf x_{n}) - \nabla F (\mathbf x_{n-1}) \right ] \right |}
{\left \|\nabla F(\mathbf{x}_{n}) - \nabla F(\mathbf{x}_{n-1}) \right \|^2}$$
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;p&gt;$$\gamma_{n} = \frac{ \left | \left (\mathbf x_{n} - \mathbf x_{n-1} \right )^T \left [\nabla F (\mathbf x_{n}) - \nabla F (\mathbf x_{n-1}) \right ] \right |}{\left |\nabla F(\mathbf{x}_{n}) - \nabla F(\mathbf{x}_{n-1}) \right |^2}$$&lt;/p&gt;
&lt;p&gt;Example &lt;strong&gt;inline math&lt;/strong&gt; &lt;code&gt;$\nabla F(\mathbf{x}_{n})$&lt;/code&gt; renders as $\nabla F(\mathbf{x}_{n})$.&lt;/p&gt;
&lt;p&gt;Example &lt;strong&gt;multi-line math&lt;/strong&gt; using the &lt;code&gt;\\\\&lt;/code&gt; math linebreak:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;$$f(k;p_0^*) = \begin{cases} p_0^* &amp;amp; \text{if }k=1, \\\\
1-p_0^* &amp;amp; \text {if }k=0.\end{cases}$$
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;p&gt;$$f(k;p_0^*) = \begin{cases} p_0^* &amp;amp; \text{if }k=1, \\&lt;br&gt;
1-p_0^* &amp;amp; \text {if }k=0.\end{cases}$$&lt;/p&gt;
&lt;h3 id=&#34;diagrams&#34;&gt;Diagrams&lt;/h3&gt;
&lt;p&gt;Academic supports a Markdown extension for diagrams. You can enable this feature by toggling the &lt;code&gt;diagram&lt;/code&gt; option in your &lt;code&gt;config/_default/params.toml&lt;/code&gt; file or by adding &lt;code&gt;diagram: true&lt;/code&gt; to your page front matter.&lt;/p&gt;
&lt;p&gt;An example &lt;strong&gt;flowchart&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
graph TD
A[Hard] --&amp;gt;|Text| B(Round)
B --&amp;gt; C{Decision}
C --&amp;gt;|One| D[Result 1]
C --&amp;gt;|Two| E[Result 2]
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;graph TD
A[Hard] --&amp;gt;|Text| B(Round)
B --&amp;gt; C{Decision}
C --&amp;gt;|One| D[Result 1]
C --&amp;gt;|Two| E[Result 2]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;An example &lt;strong&gt;sequence diagram&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
sequenceDiagram
Alice-&amp;gt;&amp;gt;John: Hello John, how are you?
loop Healthcheck
    John-&amp;gt;&amp;gt;John: Fight against hypochondria
end
Note right of John: Rational thoughts!
John--&amp;gt;&amp;gt;Alice: Great!
John-&amp;gt;&amp;gt;Bob: How about you?
Bob--&amp;gt;&amp;gt;John: Jolly good!
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;sequenceDiagram
Alice-&amp;gt;&amp;gt;John: Hello John, how are you?
loop Healthcheck
    John-&amp;gt;&amp;gt;John: Fight against hypochondria
end
Note right of John: Rational thoughts!
John--&amp;gt;&amp;gt;Alice: Great!
John-&amp;gt;&amp;gt;Bob: How about you?
Bob--&amp;gt;&amp;gt;John: Jolly good!
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;An example &lt;strong&gt;Gantt diagram&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
gantt
section Section
Completed :done,    des1, 2014-01-06,2014-01-08
Active        :active,  des2, 2014-01-07, 3d
Parallel 1   :         des3, after des1, 1d
Parallel 2   :         des4, after des1, 1d
Parallel 3   :         des5, after des3, 1d
Parallel 4   :         des6, after des4, 1d
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;gantt
section Section
Completed :done,    des1, 2014-01-06,2014-01-08
Active        :active,  des2, 2014-01-07, 3d
Parallel 1   :         des3, after des1, 1d
Parallel 2   :         des4, after des1, 1d
Parallel 3   :         des5, after des3, 1d
Parallel 4   :         des6, after des4, 1d
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;An example &lt;strong&gt;class diagram&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
classDiagram
Class01 &amp;lt;|-- AveryLongClass : Cool
&amp;lt;&amp;lt;interface&amp;gt;&amp;gt; Class01
Class09 --&amp;gt; C2 : Where am i?
Class09 --* C3
Class09 --|&amp;gt; Class07
Class07 : equals()
Class07 : Object[] elementData
Class01 : size()
Class01 : int chimp
Class01 : int gorilla
class Class10 {
  &amp;lt;&amp;lt;service&amp;gt;&amp;gt;
  int id
  size()
}
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;classDiagram
Class01 &amp;lt;|-- AveryLongClass : Cool
&amp;lt;&amp;lt;interface&amp;gt;&amp;gt; Class01
Class09 --&amp;gt; C2 : Where am i?
Class09 --* C3
Class09 --|&amp;gt; Class07
Class07 : equals()
Class07 : Object[] elementData
Class01 : size()
Class01 : int chimp
Class01 : int gorilla
class Class10 {
  &amp;lt;&amp;lt;service&amp;gt;&amp;gt;
  int id
  size()
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;An example &lt;strong&gt;state diagram&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
stateDiagram
[*] --&amp;gt; Still
Still --&amp;gt; [*]
Still --&amp;gt; Moving
Moving --&amp;gt; Still
Moving --&amp;gt; Crash
Crash --&amp;gt; [*]
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;stateDiagram
[*] --&amp;gt; Still
Still --&amp;gt; [*]
Still --&amp;gt; Moving
Moving --&amp;gt; Still
Moving --&amp;gt; Crash
Crash --&amp;gt; [*]
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;todo-lists&#34;&gt;Todo lists&lt;/h3&gt;
&lt;p&gt;You can even write your todo lists in Academic too:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;- [x] Write math example
- [x] Write diagram example
- [ ] Do something else
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; Write math example&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; Write diagram example&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; Do something else&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tables&#34;&gt;Tables&lt;/h3&gt;
&lt;p&gt;Represent your data in tables:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;| First Header  | Second Header |
| ------------- | ------------- |
| Content Cell  | Content Cell  |
| Content Cell  | Content Cell  |
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;First Header&lt;/th&gt;
&lt;th&gt;Second Header&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Content Cell&lt;/td&gt;
&lt;td&gt;Content Cell&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content Cell&lt;/td&gt;
&lt;td&gt;Content Cell&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;asides&#34;&gt;Asides&lt;/h3&gt;
&lt;p&gt;Academic supports a 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/#alerts&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;shortcode for asides&lt;/a&gt;, also referred to as &lt;em&gt;notices&lt;/em&gt;, &lt;em&gt;hints&lt;/em&gt;, or &lt;em&gt;alerts&lt;/em&gt;. By wrapping a paragraph in &lt;code&gt;{{% alert note %}} ... {{% /alert %}}&lt;/code&gt;, it will render as an aside.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{% alert note %}}
A Markdown aside is useful for displaying notices, hints, or definitions to your readers.
{{% /alert %}}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    A Markdown aside is useful for displaying notices, hints, or definitions to your readers.
  &lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;icons&#34;&gt;Icons&lt;/h3&gt;
&lt;p&gt;Academic enables you to use a wide range of 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/page-builder/#icons&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;icons from &lt;em&gt;Font Awesome&lt;/em&gt; and &lt;em&gt;Academicons&lt;/em&gt;&lt;/a&gt; in addition to 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/#emojis&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;emojis&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here are some examples using the &lt;code&gt;icon&lt;/code&gt; shortcode to render icons:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{&amp;lt; icon name=&amp;quot;terminal&amp;quot; pack=&amp;quot;fas&amp;quot; &amp;gt;}} Terminal  
{{&amp;lt; icon name=&amp;quot;python&amp;quot; pack=&amp;quot;fab&amp;quot; &amp;gt;}} Python  
{{&amp;lt; icon name=&amp;quot;r-project&amp;quot; pack=&amp;quot;fab&amp;quot; &amp;gt;}} R
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;p&gt;
  &lt;i class=&#34;fas fa-terminal  pr-1 fa-fw&#34;&gt;&lt;/i&gt; Terminal&lt;br&gt;

  &lt;i class=&#34;fab fa-python  pr-1 fa-fw&#34;&gt;&lt;/i&gt; Python&lt;br&gt;

  &lt;i class=&#34;fab fa-r-project  pr-1 fa-fw&#34;&gt;&lt;/i&gt; R&lt;/p&gt;
&lt;h3 id=&#34;did-you-find-this-page-helpful-consider-sharing-it-&#34;&gt;Did you find this page helpful? Consider sharing it ğŸ™Œ&lt;/h3&gt;
</description>
    </item>
    
    <item>
      <title>Display Jupyter Notebooks with Academic</title>
      <link>http://leofang.cn/post/jupyter/</link>
      <pubDate>Sun, 07 Jun 2020 16:33:21 +0800</pubDate>
      <guid>http://leofang.cn/post/jupyter/</guid>
      <description>&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from IPython.core.display import Image
Image(&#39;https://www.python.org/static/community_logos/python-logo-master-v3-TM-flattened.png&#39;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;./index_1_0.png&#34; alt=&#34;png&#34;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;print(&amp;quot;Welcome to Academic!&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Welcome to Academic!
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;install-python-and-jupyterlab&#34;&gt;Install Python and JupyterLab&lt;/h2&gt;
&lt;p&gt;
&lt;a href=&#34;https://www.anaconda.com/distribution/#download-section&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Install Anaconda&lt;/a&gt; which includes Python 3 and JupyterLab.&lt;/p&gt;
&lt;p&gt;Alternatively, install JupyterLab with &lt;code&gt;pip3 install jupyterlab&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&#34;create-or-upload-a-jupyter-notebook&#34;&gt;Create or upload a Jupyter notebook&lt;/h2&gt;
&lt;p&gt;Run the following commands in your Terminal, substituting &lt;code&gt;&amp;lt;MY-WEBSITE-FOLDER&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;SHORT-POST-TITLE&amp;gt;&lt;/code&gt; with the file path to your Academic website folder and a short title for your blog post (use hyphens instead of spaces), respectively:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;mkdir -p &amp;lt;MY-WEBSITE-FOLDER&amp;gt;/content/post/&amp;lt;SHORT-POST-TITLE&amp;gt;/
cd &amp;lt;MY-WEBSITE-FOLDER&amp;gt;/content/post/&amp;lt;SHORT-POST-TITLE&amp;gt;/
jupyter lab index.ipynb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;jupyter&lt;/code&gt; command above will launch the JupyterLab editor, allowing us to add Academic metadata and write the content.&lt;/p&gt;
&lt;h2 id=&#34;edit-your-post-metadata&#34;&gt;Edit your post metadata&lt;/h2&gt;
&lt;p&gt;The first cell of your Jupter notebook will contain your post metadata (
&lt;a href=&#34;https://sourcethemes.com/academic/docs/front-matter/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;front matter&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;In Jupter, choose &lt;em&gt;Markdown&lt;/em&gt; as the type of the first cell and wrap your Academic metadata in three dashes, indicating that it is YAML front matter:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;---
title: My post&#39;s title
date: 2019-09-01

# Put any other Academic metadata here...
---
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Edit the metadata of your post, using the 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;documentation&lt;/a&gt; as a guide to the available options.&lt;/p&gt;
&lt;p&gt;To set a 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#featured-image&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;featured image&lt;/a&gt;, place an image named &lt;code&gt;featured&lt;/code&gt; into your post&amp;rsquo;s folder.&lt;/p&gt;
&lt;p&gt;For other tips, such as using math, see the guide on 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;writing content with Academic&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;convert-notebook-to-markdown&#34;&gt;Convert notebook to Markdown&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;jupyter nbconvert index.ipynb --to markdown --NbConvertApp.output_files_dir=.
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;example&#34;&gt;Example&lt;/h2&gt;
&lt;p&gt;This post was created with Jupyter. The orginal files can be found at &lt;a href=&#34;https://github.com/gcushen/hugo-academic/tree/master/exampleSite/content/post/jupyter&#34;&gt;https://github.com/gcushen/hugo-academic/tree/master/exampleSite/content/post/jupyter&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Internal Project</title>
      <link>http://leofang.cn/project/internal-project/</link>
      <pubDate>Mon, 01 Jun 2020 17:05:58 +0800</pubDate>
      <guid>http://leofang.cn/project/internal-project/</guid>
      <description>&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>External Project</title>
      <link>http://leofang.cn/project/external-project/</link>
      <pubDate>Sat, 30 May 2020 17:14:49 +0800</pubDate>
      <guid>http://leofang.cn/project/external-project/</guid>
      <description></description>
    </item>
    
    <item>
      <title>åå¤§ç»å…¸æ’åºç®—æ³•æ•´ç†æ±‡æ€»</title>
      <link>http://leofang.cn/post/sort-algorithm/</link>
      <pubDate>Fri, 29 May 2020 20:46:57 +0800</pubDate>
      <guid>http://leofang.cn/post/sort-algorithm/</guid>
      <description>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡æ•´ç†å¹¶æ€»ç»“äº†åå¤§ç»å…¸çš„æ’åºç®—æ³•ï¼ˆå†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€æ’å…¥æ’åºã€å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€å¸Œå°”æ’åºã€è®¡æ•°æ’åºã€åŸºæ•°æ’åºã€æ¡¶æ’åºã€å †æ’åºï¼‰çš„æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ç­‰æ€§è´¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æœ¬æ–‡å¹¶ä¸ä¼šè¯¦ç»†è®²è§£æ¯ç§æ’åºç®—æ³•çš„åŸç†&lt;/strong&gt;ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šå¾ˆå¥½çš„æ•™ç¨‹ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»æœäº†çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åæˆ‘è¿˜äº²è‡ªæ‰‹å†™äº†åç§æ’åºç®—æ³•çš„ c++ ä»£ç ï¼Œå¤§å®¶å¯ä»¥ç”¨æ¥é€šè¿‡ 
&lt;a href=&#34;https://leetcode-cn.com/problems/sort-an-array/&#34; title=&#34;LeetCode 912. æ’åºæ•°ç»„&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LeetCode 912. æ’åºæ•°ç»„&lt;/a&gt; è¿™é“é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€§è´¨æ±‡æ€»&#34;&gt;æ€§è´¨æ±‡æ€»&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœå‘ç°è¡¨ä¸­æœ‰é”™è¯¯ï¼Œè¯·ç•™è¨€å‘ŠçŸ¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç®—æ³•&lt;/th&gt;
&lt;th&gt;æœ€å¥½&lt;/th&gt;
&lt;th&gt;æœ€å&lt;/th&gt;
&lt;th&gt;å¹³å‡&lt;/th&gt;
&lt;th&gt;ç©ºé—´&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;ç¨³å®šæ€§&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;æ˜¯å¦åŸºäºæ¯”è¾ƒ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;å†’æ³¡æ’åº&lt;/td&gt;
&lt;td&gt;$O(n)$&lt;/td&gt;
&lt;td&gt;$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(1)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é€‰æ‹©æ’åº&lt;/td&gt;
&lt;td&gt;$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(1)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\times$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ’å…¥æ’åº&lt;/td&gt;
&lt;td&gt;$O(n)$&lt;/td&gt;
&lt;td&gt;$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(1)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¿«é€Ÿæ’åº&lt;/td&gt;
&lt;td&gt;$O(n\log n)$&lt;/td&gt;
&lt;td&gt;$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(n\log n)$&lt;/td&gt;
&lt;td&gt;$O(\log n)$~$O(n)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\times$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å½’å¹¶æ’åº&lt;/td&gt;
&lt;td&gt;$O(n\log n)$&lt;/td&gt;
&lt;td&gt;$O(n\log n)$&lt;/td&gt;
&lt;td&gt;$O(n\log n)$&lt;/td&gt;
&lt;td&gt;$O(n)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¸Œå°”æ’åº&lt;/td&gt;
&lt;td&gt;$O(n^{1.3})$&lt;/td&gt;
&lt;td&gt;$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(n\log n)$~$O(n^2)$&lt;/td&gt;
&lt;td&gt;$O(1)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\times$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è®¡æ•°æ’åº&lt;/td&gt;
&lt;td&gt;$O(n+k)$&lt;/td&gt;
&lt;td&gt;$O(n+k)$&lt;/td&gt;
&lt;td&gt;$O(n+k)$&lt;/td&gt;
&lt;td&gt;$O(n+k)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\times$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;åŸºæ•°æ’åº&lt;/td&gt;
&lt;td&gt;$O(nk)$&lt;/td&gt;
&lt;td&gt;$O(nk)$&lt;/td&gt;
&lt;td&gt;$O(nk)$&lt;/td&gt;
&lt;td&gt;$O(n+k)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\times$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ¡¶æ’åº&lt;/td&gt;
&lt;td&gt;$O(n)$&lt;/td&gt;
&lt;td&gt;$O(n)$&lt;/td&gt;
&lt;td&gt;$O(n)$&lt;/td&gt;
&lt;td&gt;$O(n+m)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\times$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å †æ’åº&lt;/td&gt;
&lt;td&gt;$O(n\log n)$&lt;/td&gt;
&lt;td&gt;$O(n\log n)$&lt;/td&gt;
&lt;td&gt;$O(n\log n)$&lt;/td&gt;
&lt;td&gt;$O(1)$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\times$&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;$\checkmark$&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;ç»´åŸºç™¾ç§‘&#34;&gt;ç»´åŸºç™¾ç§‘&lt;/h3&gt;
&lt;p&gt;æˆ‘è§‰å¾—è¿˜æ˜¯è‹±æ–‡ç»´åŸºç™¾ç§‘è®²çš„æ¯”è¾ƒè¯¦ç»†ã€ä¸¥è°¨ã€‚å¦‚æœå¤§å®¶çœ‹çš„æ¯”è¾ƒç´¯çš„è¯ï¼Œå¯ä»¥è‡ªå·±ç™¾åº¦æœç´¢ç›¸åº”çš„æ•™ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å†’æ³¡æ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Bubble_sort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Bubble_sort&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€‰æ‹©æ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Selection_sort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Selection_sort&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ’å…¥æ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Insertion_sort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Insertion_sort&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¿«é€Ÿæ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Quicksort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Quicksort&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å½’å¹¶æ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Merge_sort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Merge_sort&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¸Œå°”æ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Shellsort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Shellsort&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è®¡æ•°æ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Counting_sort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Counting_sort&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæ•°æ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Radix_sort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Radix_sort&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¡¶æ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Bucket_sort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Bucket_sort&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å †æ’åº&lt;/strong&gt;  : 
&lt;a href=&#34;https://en.wikipedia.org/wiki/Heapsort&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Heapsort&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç å®ç°&#34;&gt;ä»£ç å®ç°&lt;/h2&gt;
&lt;p&gt;æ‰€æœ‰çš„æ’åºç®—æ³•æ¥å£éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯ &lt;code&gt;vector&amp;lt;int&amp;gt; xxxSort(vector&amp;lt;int&amp;gt;&amp;amp; nums)&lt;/code&gt; ã€‚åªéœ€è¦ä½ ä¼ å…¥ä¸€ä¸ª &lt;code&gt;vector&amp;lt;int&amp;gt;&lt;/code&gt; ç±»å‹çš„æ•°ç»„ï¼Œå°±èƒ½è¿”å›æ’åºåçš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;è¿è¡Œä¸‹æ¥å¯ä»¥å‘ç°ï¼Œæ¡¶æ’åºé€Ÿåº¦æ˜¯æ¯”è¾ƒå¿«çš„ã€‚è€Œå†’æ³¡æ’åºã€é€‰æ‹©æ’åºå’Œæ’å…¥æ’åºå› ä¸ºæ—¶é—´å¤æ‚åº¦å¤ªé«˜æ— æ³•é€šè¿‡æœ¬é¢˜ï¼ŒåŸºæ•°æ’åºå› ä¸ºæ— æ³•å¤„ç†è´Ÿæ•°ä¹Ÿä¸èƒ½é€šè¿‡æœ¬é¢˜ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;class Solution {
public:
    vector&amp;lt;int&amp;gt; sortArray(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        return quickSort(nums);
    }

    // å†’æ³¡æ’åºï¼ˆè¶…æ—¶ï¼‰
    vector&amp;lt;int&amp;gt; bubbleSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        for (int i = 0; i &amp;lt; n; ++i) {
            for (int j = n-2; j &amp;gt;= i; --j) {
                if (nums[j] &amp;gt; nums[j+1]) {
                    swap(nums[j], nums[j+1]);
                }
            }
        }
        return nums;
    }

    // é€‰æ‹©æ’åºï¼ˆè¶…æ—¶ï¼‰
    vector&amp;lt;int&amp;gt; selectSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        for (int i = 0; i &amp;lt; n; ++i) {
            int idx = i;
            for (int j = i; j &amp;lt; n; ++j) {
                if (nums[j] &amp;lt; nums[idx]) {
                    idx = j;
                }
            }
            swap(nums[i], nums[idx]);
        }
        return nums;
    }

    // æ’å…¥æ’åºï¼ˆè¶…æ—¶ï¼‰
    vector&amp;lt;int&amp;gt; insertSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        for (int i = 0; i &amp;lt; n; ++i) {
            for (int j = i; j &amp;gt; 0 &amp;amp;&amp;amp; nums[j] &amp;lt; nums[j-1]; --j) {
                swap(nums[j], nums[j-1]);
            }
        }
        return nums;
    }

    // å¿«é€Ÿæ’åºï¼ˆ24 msï¼‰
    void qSort(vector&amp;lt;int&amp;gt;&amp;amp; nums, int l, int r) {
        if (l &amp;gt;= r) return;
        int m = l;
        for (int i = l; i &amp;lt; r; ++i) {
            if (nums[i] &amp;lt; nums[r]) {
                swap(nums[m++], nums[i]);
            }
        }
        swap(nums[m], nums[r]);
        qSort(nums, l, m-1);
        qSort(nums, m+1, r);
    }

    vector&amp;lt;int&amp;gt; quickSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        qSort(nums, 0, n-1);
        return nums;
    }

    // å½’å¹¶æ’åºï¼ˆ192 msï¼‰
    vector&amp;lt;int&amp;gt; mSort(vector&amp;lt;int&amp;gt;&amp;amp; nums, int l, int r) {
        if (l &amp;gt;= r) return {nums[l]};
        int m = l+(r-l)/2;
        vector&amp;lt;int&amp;gt; lnums = mSort(nums, l, m);
        vector&amp;lt;int&amp;gt; rnums = mSort(nums, m+1, r);
        vector&amp;lt;int&amp;gt; res;
        int i = 0, j = 0;
        while (i &amp;lt;= m-l &amp;amp;&amp;amp; j &amp;lt;= r-m-1) {
            if (lnums[i] &amp;lt; rnums[j]) {
                res.push_back(lnums[i++]);
            } else {
                res.push_back(rnums[j++]);
            }
        }
        while (i &amp;lt;= m-l) {
            res.push_back(lnums[i++]);
        }
        while (j &amp;lt;= r-m-1) {
            res.push_back(rnums[j++]);
        }
        return res;
    }

    vector&amp;lt;int&amp;gt; mergeSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        nums = mSort(nums, 0, n-1);
        return nums;
    }

    // å½’å¹¶æ’åº + éé€’å½’ï¼ˆ80 msï¼‰
    vector&amp;lt;int&amp;gt; mergeSortNR(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        for (int len = 1; len &amp;lt; n; len &amp;lt;&amp;lt;= 1) {
            for (int l = 0; l &amp;lt; n-len; l += 2*len) {
                int m = l+len-1;
                int r = min(n-1, l+2*len-1);
                vector&amp;lt;int&amp;gt; res;
                int i = l, j = m+1;
                while (i &amp;lt;= m &amp;amp;&amp;amp; j &amp;lt;= r) {
                    if (nums[i] &amp;lt; nums[j]) {
                        res.push_back(nums[i++]);
                    } else {
                        res.push_back(nums[j++]);
                    }
                }
                while (i &amp;lt;= m) {
                    res.push_back(nums[i++]);
                }
                while (j &amp;lt;= r) {
                    res.push_back(nums[j++]);
                }
                for (int i = l; i &amp;lt;= r; ++i) {
                    nums[i] = res[i-l];
                }
            }
        }
        return nums;
    }

    // å¸Œå°”æ’åºï¼ˆ40 msï¼‰
    vector&amp;lt;int&amp;gt; shellSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        for (int gap = n/2; gap &amp;gt; 0; gap /= 2) {
            for (int i = gap; i &amp;lt; n; ++i) {
                for (int j = i; j-gap &amp;gt;= 0 &amp;amp;&amp;amp; nums[j-gap] &amp;gt; nums[j]; j -= gap) {
                    swap(nums[j-gap], nums[j]);
                }
            }
        }
        return nums;
    }

    // è®¡æ•°æ’åºï¼ˆ32 msï¼‰
    vector&amp;lt;int&amp;gt; countSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        if (!n) return {};
        int minv = *min_element(nums.begin(), nums.end());
        int maxv = *max_element(nums.begin(), nums.end());
        int m = maxv-minv+1;
        vector&amp;lt;int&amp;gt; count(m, 0);
        for (int i = 0; i &amp;lt; n; ++i) {
            count[nums[i]-minv]++;
        }
        vector&amp;lt;int&amp;gt; res;
        for (int i = 0; i &amp;lt; m; ++i) {
            for (int j = 0; j &amp;lt; count[i]; ++j) {
                res.push_back(i+minv);
            }
        }
        return res;
    }

    // åŸºæ•°æ’åºï¼ˆä¸é€‚ç”¨äºè´Ÿæ•°ï¼‰
    vector&amp;lt;int&amp;gt; radixSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        int maxv = *max_element(nums.begin(), nums.end());
        int maxd = 0;
        while (maxv &amp;gt; 0) {
            maxv /= 10;
            maxd++;
        }
        vector&amp;lt;int&amp;gt; count(10, 0), rank(n, 0);
        int base = 1;
        while (maxd &amp;gt; 0) {
            count.assign(10, 0);
            for (int i = 0; i &amp;lt; n; ++i) {
                count[(nums[i]/base)%10]++;
            }
            for (int i = 1; i &amp;lt; 10; ++i) {
                count[i] += count[i-1];
            }
            for (int i = n-1; i &amp;gt;= 0; --i) {
                rank[--count[(nums[i]/base)%10]] = nums[i];
            }
            for (int i = 0; i &amp;lt; n; ++i) {
                nums[i] = rank[i];
            }
            maxd--;
            base *= 10;
        }
        return nums;
    }

    // æ¡¶æ’åº (20 ms)
    vector&amp;lt;int&amp;gt; bucketSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        int maxv = *max_element(nums.begin(), nums.end());
        int minv = *min_element(nums.begin(), nums.end());
        int bs = 1000;
        int m = (maxv-minv)/bs+1;
        vector&amp;lt;vector&amp;lt;int&amp;gt; &amp;gt; bucket(m);
        for (int i = 0; i &amp;lt; n; ++i) {
            bucket[(nums[i]-minv)/bs].push_back(nums[i]);
        }
        int idx = 0;
        for (int i = 0; i &amp;lt; m; ++i) {
            int sz = bucket[i].size();
            bucket[i] = quickSort(bucket[i]);
            for (int j = 0; j &amp;lt; sz; ++j) {
                nums[idx++] = bucket[i][j];
            }
        }
        return nums;
    }

    // å †æ’åºï¼ˆ32 msï¼‰
    void adjust(vector&amp;lt;int&amp;gt;&amp;amp; nums, int p, int s) {
        while (2*p+1 &amp;lt; s) {
            int c1 = 2*p+1;
            int c2 = 2*p+2;
            int c = (c2&amp;lt;s &amp;amp;&amp;amp; nums[c2]&amp;gt;nums[c1]) ? c2 : c1;
            if (nums[c] &amp;gt; nums[p]) swap(nums[c], nums[p]);
            else break;
            p = c;
        }
    }

    vector&amp;lt;int&amp;gt; heapSort(vector&amp;lt;int&amp;gt;&amp;amp; nums) {
        int n = nums.size();
        for (int i = n/2-1; i &amp;gt;= 0; --i) {
            adjust(nums, i, n);
        }
        for (int i = n-1; i &amp;gt; 0; --i) {
            swap(nums[0], nums[i]);
            adjust(nums, 0, i);
        }
        return nums;
    }
};
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>
